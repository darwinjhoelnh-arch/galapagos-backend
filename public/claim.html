<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reclamar Gal√°pagos</title>
</head>
<body style="background:#0b1f1a;color:#eafff7;text-align:center;padding-top:60px;font-family:Arial">

<h2>üå± Gal√°pagos Token</h2>
<p>Firma para reclamar tu recompensa</p>

<button onclick="claim()">Firmar con Phantom</button>

<pre id="out"></pre>

<script>
async function claim() {
  if (!window.solana || !window.solana.isPhantom) {
    alert("Abre este enlace dentro de Phantom Wallet");
    return;
  }

  await window.solana.connect();

  const msg = new TextEncoder().encode("Reclamo Gal√°pagos Token");
  const signed = await window.solana.signMessage(msg, "utf8");

  const res = await fetch(window.location.pathname + "/sign", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      publicKey: window.solana.publicKey.toString(),
      signature: Array.from(signed.signature)
    })
  });

  const data = await res.json();
  document.getElementById("out").textContent =
    JSON.stringify(data, null, 2);
}
</script>

</body>
</html>
