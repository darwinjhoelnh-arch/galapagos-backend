<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Reclamar</title>
<style>
body{
  background:#000;
  color:#00ffb2;
  font-family:system-ui;
  text-align:center;
}
.card{
  margin:40px auto;
  max-width:360px;
  padding:30px;
  background:#041b14;
  border-radius:24px;
  box-shadow:0 0 40px rgba(0,255,180,.25);
}
button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:999px;
  background:#00ffb2;
  font-size:18px;
}
</style>
</head>
<body>

<div class="card">
  <h2>ðŸŒ± GalÃ¡pagos</h2>
  <p id="p"></p>
  <p id="v"></p>
  <p><b>Recompensa:</b> 1%</p>
  <p id="t"></p>
  <button onclick="claim()">Reclamar</button>
</div>

<script>
const id = location.pathname.split("/").pop();

fetch(`/api/qr/${id}`)
.then(r=>r.json())
.then(d=>{
  p.innerText="Producto: "+d.name;
  v.innerText="Valor: $"+d.price_usd;
  t.innerText="Tokens: "+(d.price_usd*0.01).toFixed(4);
});

async function claim(){
  const r = await fetch(`/api/qr/${id}/claim`,{method:"POST"});
  const j = await r.json();
  alert(j.success?"Reclamado":"Error");
}
</script>
</body>
</html>
 if(j.success){
    alert("âœ… Recompensa reclamada");
    location.reload();
  }else{
    alert(j.error);
    btn.disabled = false;
  }
};
</script>
</body>
</html>
