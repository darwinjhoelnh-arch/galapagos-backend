<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Reclamar</title>
<style>
body{margin:0;background:#021812;color:#eafff7;font-family:system-ui}
.card{margin:24px;padding:22px;border-radius:18px;background:#053124}
h2{color:#00ffb3;text-align:center}
.btn{width:100%;padding:14px;border:none;border-radius:14px;background:#00ffb3;font-size:18px;font-weight:700}
</style>
</head>
<body>

<div class="card">
  <h2>ðŸŒ± GalÃ¡pagos</h2>
  <p>Producto: <b id="n">â€“</b></p>
  <p>Valor: $<b id="p">â€“</b></p>
  <p>Recompensa: 1%</p>
  <p>Tokens: <b id="t">â€“</b></p>
  <button class="btn" onclick="claim()">Reclamar</button>
</div>

<script>
const id = location.pathname.split("/").pop();

fetch(`/api/qr/${id}`)
.then(r=>r.json())
.then(d=>{
  n.textContent=d.name;
  p.textContent=d.price_usd;
  t.textContent=(d.price_usd*0.01).toFixed(6);
});

function claim(){
  fetch(`/api/claim/${id}`,{method:"POST"})
  .then(r=>r.json())
  .then(j=>alert(j.success?"Reclamado":"Error"));
}
</script>

</body>
</html>
