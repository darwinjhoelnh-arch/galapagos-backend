<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Galápagos</title>
<style>
body{background:#020d08;color:#00ff9c;font-family:sans-serif}
input,button{padding:10px;margin:5px}
.card{border:1px solid #00ff9c;padding:10px;margin:10px}
</style>
</head>
<body>

<h2>Admin Galápagos</h2>

<input id="name" placeholder="Producto">
<input id="value" placeholder="Precio USD">
<input id="units" placeholder="Cantidad">
<button onclick="create()">Crear</button>

<div id="products"></div>

<script>
const TOKEN = prompt("Admin token");

async function load(){
  const r = await fetch("/admin/products");
  const d = await r.json();
  document.getElementById("products").innerHTML =
    d.map(p=>`
      <div class="card">
        <b>${p.name}</b><br>
        Precio: $${p.price_usd}<br>
        QRs: ${p.claimed}/${p.units}
      </div>
    `).join("");
}

async function create(){
  await fetch("/admin/create-product",{
    method:"POST",
    headers:{
      "Content-Type":"application/json",
      "Authorization":"Bearer "+TOKEN
    },
    body:JSON.stringify({
      name: name.value,
      value: value.value,
      units: units.value
    })
  });
  load();
}

load();
</script>
</body>
</html>
